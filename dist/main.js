!function(){"use strict";class e{constructor(e,t,s){this._place=e.place,this._link=e.link,this._alt=e.alt,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeButton()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteButton()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick(this._link,this._alt,this._place)}))}_handleLikeButton(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}getView(){const e=document.querySelector(this._cardSelector);this._cardElement=e.content.firstElementChild.cloneNode(!0);const t=this._cardElement.querySelector(".card__image"),s=this._cardElement.querySelector(".card__caption");return t.src=this._link,t.alt=this._alt,s.textContent=this._place,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._settings=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._settings.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._settings.errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.textContent="",t.classList.remove(this._settings.errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():(this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this._toggleButtonState()}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}disableButton(){this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0}}class s{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._handleMouseDown=this._handleMouseDown.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this._isMouseDownOnModal=!1}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleMouseDown(e){e.target.classList.contains("modal_opened")?this._isMouseDownOnModal=!0:this._isMouseDownOnModal=!1}_handleMouseUp(e){this._isMouseDownOnModal&&e.target.classList.contains("modal_opened")&&this.close(e.target),this._isMouseDownOnModal=!1}setEventListeners(){this._popupElement.addEventListener("mousedown",this._handleMouseDown),this._popupElement.addEventListener("mouseup",this._handleMouseUp),this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>this.close()))}}document.querySelector("#card-template").content;const n=document.querySelector("#profile-edit-modal"),o=document.querySelector("#profile-add-modal"),i=document.querySelector("#profile-preview-modal"),a=n.querySelector(".modal__form"),r=o.querySelector(".modal__form"),l=(document.querySelector(".cards__list"),document.querySelector("#profile-edit-button")),c=n.querySelector("#modal-button-close"),u=o.querySelector("#modal-button-close"),d=document.querySelector("#profile-add-button"),m=i.querySelector("#modal-button-close");i.querySelector(".modal__image"),i.querySelector(".modal__heading");const _=document.querySelector("#modal-input-name"),h=document.querySelector("#modal-input-description"),p=r.querySelector("#modal-input-place"),g=r.querySelector("#modal-input-link"),E={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__submit-button_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_active"};new t(E,a),new t(E,r);class v extends s{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputs=Array.from(this._popupForm.querySelectorAll(".modal__input"))}_getInputValues(){return this._inputValues={},this._inputs.forEach((e=>{console.log(`Input Name: ${e.name}, Input Value: ${e.value}`),this._inputValues[e.name]=e.value})),this._inputValues}setEventListeners(){super.setEventListeners(),this._popupForm.removeEventListener("submit",this._submitHandler),this._submitHandler=e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())},this._popupForm.addEventListener("submit",this._submitHandler)}close(){super.close(),this._popupForm.reset()}}const f=new t(E,a),w=new t(E,r);f.enableValidation(),w.enableValidation();const y=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:s}=e;this._nameElement.textContent=t,this._jobElement.textContent=s}}({nameSelector:"#profile-name",jobSelector:"#profile-description"}),S=new v("#profile-edit-modal",(function(){console.log("Edit form submit handler called"),console.log("Name:",_.value),console.log("Description:",h.value),y.setUserInfo({name:_.value,job:h.value}),a.reset(),f.resetValidation(),f.disableButton(),S.close()})),b=new v("#profile-add-modal",(function(){const e=q({place:p.value,link:g.value,alt:`Image of ${p.value}`});k.addItem(e),r.reset(),w.resetValidation(),w.disableButton(),b.close()})),L=new class extends s{constructor(e){super(e),this._image=this._popupElement.querySelector(".modal__image"),this._place=this._popupElement.querySelector(".modal__heading_type_preview")}open(e,t,s){this._image.src=e,this._image.alt=t,this._place.textContent=s,super.open()}}("#profile-preview-modal");S.setEventListeners(),b.setEventListeners(),L.setEventListeners();const k=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.append(e)}}({items:[{place:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg",alt:"Sunset view of Yosemite Valley with El Capitan visible, river flowing in the foreground surrounded by dense pine trees."},{place:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg",alt:"Calm waters of Lake Louise reflecting the surrounding mountains under a soft blue sky."},{place:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg",alt:"Sunburst peaking over the silhouette of the Bald Mountains at sunrise, casting a warm glow across the hazy, layered ridges."},{place:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg",alt:"Starry night sky over the jagged peaks of Latemar mountain range with remnants of snow highlighting its rugged terrain."},{place:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg",alt:"Twilight hues casting a soft glow on the peaks of Vanoise National Park, reflected in the still waters of a mountain lake."},{place:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg",alt:"Wooden boats moored at a dock on Lago di Braies with towering Dolomite mountains reflecting in the crystal-clear lake water."}],renderer:e=>{const t=q(e);k.addItem(t)}},".cards__list");function q(t){return new e(t,"#card-template",B).getView()}function B(e,t,s){L.open(e,t,s)}l.addEventListener("click",(()=>{const e=y.getUserInfo();console.log("Edit Button Clicked - User Data:",e),_.value=e.name,h.value=e.job,f.resetValidation(),S.open()})),c.addEventListener("click",(()=>S.close())),d.addEventListener("click",(()=>{w.resetValidation(),r.reset(),w.disableButton(),b.open()})),u.addEventListener("click",(()=>b.close())),m.addEventListener("click",(()=>L.close())),i.addEventListener("click",(e=>{e.target===i&&L.close()})),k.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QnhFLGlCQUFpQixTQUFTLEtBQzFDLE1BQU1nSSxFQUFXNUIsRUFBU00sY0FDMUJkLFFBQVFDLElBQUksbUNBQW9DbUMsR0FFaERuRCxFQUFpQmtCLE1BQVFpQyxFQUFTbEMsS0FDbENoQixFQUF3QmlCLE1BQVFpQyxFQUFTckIsSUFFekNULEVBQXlCaEQsa0JBQ3pCNEQsRUFBaUJuRCxNQUFNLElBR3pCYyxFQUF1QnpFLGlCQUFpQixTQUFTLElBQy9DOEcsRUFBaUJsRCxVQUduQmUsRUFBaUIzRSxpQkFBaUIsU0FBUyxLQUN6Q21HLEVBQXdCakQsa0JBQ3hCcUIsRUFBZTBCLFFBQ2ZFLEVBQXdCeEQsZ0JBQ3hCb0UsRUFBZ0JwRCxNQUFNLElBR3hCZSxFQUFzQjFFLGlCQUFpQixTQUFTLElBQU0rRyxFQUFnQm5ELFVBRXRFZ0IsRUFBMEI1RSxpQkFBaUIsU0FBUyxJQUNsRG9ILEVBQW9CeEQsVUFHdEJTLEVBQW9CckUsaUJBQWlCLFNBQVU4RCxJQUN6Q0EsRUFBTUUsU0FBV0ssR0FDbkIrQyxFQUFvQnhELE9BQ3RCLElBSUZzRCxFQUFZVSxhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5fcGxhY2UgPSBkYXRhLnBsYWNlO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fYWx0ID0gZGF0YS5hbHQ7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24oKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9saW5rLCB0aGlzLl9hbHQsIHRoaXMuX3BsYWNlKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VCdXR0b24oKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICAvLyBnZXQgY2FyZCB2aWV3XG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICBjb25zdCBjYXJkQ2FwdGlvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fY2FwdGlvblwiKTtcblxuICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9hbHQ7XG4gICAgY2FyZENhcHRpb24udGV4dENvbnRlbnQgPSB0aGlzLl9wbGFjZTtcblxuICAgIC8vIHNldCBldmVudCBsaXN0ZW5lclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAvLyByZXR1cm4gY2FyZFxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuXG4gIC8vIFBSSVZBVEUgTUVUSE9EU1xuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4gIC8vIFBVQkxJQyBNRVRIT0RTXG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4gIGRpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgLy8gY29uc29sZS5sb2coXCJQb3B1cCBzZWxlY3RvcjpcIiwgcG9wdXBTZWxlY3Rvcik7IC8vIERlYnVnZ2luZyBsaW5lXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcIlBvcHVwIGVsZW1lbnQ6XCIsIHRoaXMuX3BvcHVwRWxlbWVudCk7IC8vIERlYnVnZ2luZyBsaW5lXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZU1vdXNlRG93biA9IHRoaXMuX2hhbmRsZU1vdXNlRG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZU1vdXNlVXAgPSB0aGlzLl9oYW5kbGVNb3VzZVVwLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faXNNb3VzZURvd25Pbk1vZGFsID0gZmFsc2U7XG4gIH1cblxuICAvLyBPdGhlciBtZXRob2RzLi4uXG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZU1vdXNlRG93bihldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XG4gICAgICB0aGlzLl9pc01vdXNlRG93bk9uTW9kYWwgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pc01vdXNlRG93bk9uTW9kYWwgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfaGFuZGxlTW91c2VVcChldmVudCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuX2lzTW91c2VEb3duT25Nb2RhbCAmJlxuICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKVxuICAgICkge1xuICAgICAgdGhpcy5jbG9zZShldmVudC50YXJnZXQpO1xuICAgIH1cbiAgICB0aGlzLl9pc01vdXNlRG93bk9uTW9kYWwgPSBmYWxzZTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU1vdXNlRG93bik7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuX2hhbmRsZU1vdXNlVXApO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gIH1cbn1cbiIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIHBsYWNlOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgICBhbHQ6IFwiU3Vuc2V0IHZpZXcgb2YgWW9zZW1pdGUgVmFsbGV5IHdpdGggRWwgQ2FwaXRhbiB2aXNpYmxlLCByaXZlciBmbG93aW5nIGluIHRoZSBmb3JlZ3JvdW5kIHN1cnJvdW5kZWQgYnkgZGVuc2UgcGluZSB0cmVlcy5cIixcbiAgfSxcbiAge1xuICAgIHBsYWNlOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICAgIGFsdDogXCJDYWxtIHdhdGVycyBvZiBMYWtlIExvdWlzZSByZWZsZWN0aW5nIHRoZSBzdXJyb3VuZGluZyBtb3VudGFpbnMgdW5kZXIgYSBzb2Z0IGJsdWUgc2t5LlwiLFxuICB9LFxuICB7XG4gICAgcGxhY2U6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gICAgYWx0OiBcIlN1bmJ1cnN0IHBlYWtpbmcgb3ZlciB0aGUgc2lsaG91ZXR0ZSBvZiB0aGUgQmFsZCBNb3VudGFpbnMgYXQgc3VucmlzZSwgY2FzdGluZyBhIHdhcm0gZ2xvdyBhY3Jvc3MgdGhlIGhhenksIGxheWVyZWQgcmlkZ2VzLlwiLFxuICB9LFxuICB7XG4gICAgcGxhY2U6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICAgIGFsdDogXCJTdGFycnkgbmlnaHQgc2t5IG92ZXIgdGhlIGphZ2dlZCBwZWFrcyBvZiBMYXRlbWFyIG1vdW50YWluIHJhbmdlIHdpdGggcmVtbmFudHMgb2Ygc25vdyBoaWdobGlnaHRpbmcgaXRzIHJ1Z2dlZCB0ZXJyYWluLlwiLFxuICB9LFxuICB7XG4gICAgcGxhY2U6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gICAgYWx0OiBcIlR3aWxpZ2h0IGh1ZXMgY2FzdGluZyBhIHNvZnQgZ2xvdyBvbiB0aGUgcGVha3Mgb2YgVmFub2lzZSBOYXRpb25hbCBQYXJrLCByZWZsZWN0ZWQgaW4gdGhlIHN0aWxsIHdhdGVycyBvZiBhIG1vdW50YWluIGxha2UuXCIsXG4gIH0sXG4gIHtcbiAgICBwbGFjZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICAgIGFsdDogXCJXb29kZW4gYm9hdHMgbW9vcmVkIGF0IGEgZG9jayBvbiBMYWdvIGRpIEJyYWllcyB3aXRoIHRvd2VyaW5nIERvbG9taXRlIG1vdW50YWlucyByZWZsZWN0aW5nIGluIHRoZSBjcnlzdGFsLWNsZWFyIGxha2Ugd2F0ZXIuXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQ7XG5cbi8vIEVsZW1lbnRzXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtcHJldmlldy1tb2RhbFwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkRm9ybSA9IHByb2ZpbGVBZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcblxuLy8gQnV0dG9uc1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uQ2xvc2UgPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI21vZGFsLWJ1dHRvbi1jbG9zZVwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRCdXR0b25DbG9zZSA9IHByb2ZpbGVBZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNtb2RhbC1idXR0b24tY2xvc2VcIlxuKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVByZXZpZXdCdXR0b25DbG9zZSA9IHByb2ZpbGVQcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjbW9kYWwtYnV0dG9uLWNsb3NlXCJcbik7XG5leHBvcnQgbGV0IGlzTW91c2VEb3duT25Nb2RhbCA9IGZhbHNlO1xuXG4vLyBQcm9maWxlIERhdGFcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IFwiI3Byb2ZpbGUtbmFtZVwiO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IFwiI3Byb2ZpbGUtZGVzY3JpcHRpb25cIjtcbmV4cG9ydCBjb25zdCBjYXJkUHJldmlld0ltYWdlID1cbiAgcHJvZmlsZVByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBjYXJkUHJldmlld0NhcHRpb24gPVxuICBwcm9maWxlUHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2hlYWRpbmdcIik7XG5cbi8vIEZvcm0gRGF0YVxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWlucHV0LW5hbWVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUlucHV0RGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNtb2RhbC1pbnB1dC1kZXNjcmlwdGlvblwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbnB1dFBsYWNlID1cbiAgcHJvZmlsZUFkZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1pbnB1dC1wbGFjZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5wdXRMaW5rID1cbiAgcHJvZmlsZUFkZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1pbnB1dC1saW5rXCIpO1xuXG4vLyBWYWxpZGF0aW9uIHNldHRpbmdzXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnV0dG9uX2luYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBwcm9maWxlRWRpdEZvcm1cbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBwcm9maWxlQWRkRm9ybVxuKTtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuaW1wb3J0IHt9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0cyA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIilcbiAgICApO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgSW5wdXQgTmFtZTogJHtpbnB1dC5uYW1lfSwgSW5wdXQgVmFsdWU6ICR7aW5wdXQudmFsdWV9YCk7XG4gICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX3N1Ym1pdEhhbmRsZXIpO1xuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9O1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX3N1Ym1pdEhhbmRsZXIpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBjYXJkVGVtcGxhdGUsXG4gIHByb2ZpbGVFZGl0TW9kYWwsXG4gIHByb2ZpbGVBZGRNb2RhbCxcbiAgcHJvZmlsZVByZXZpZXdNb2RhbCxcbiAgcHJvZmlsZUVkaXRGb3JtLFxuICBwcm9maWxlQWRkRm9ybSxcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIHByb2ZpbGVFZGl0QnV0dG9uQ2xvc2UsXG4gIHByb2ZpbGVBZGRCdXR0b24sXG4gIHByb2ZpbGVBZGRCdXR0b25DbG9zZSxcbiAgcHJvZmlsZVByZXZpZXdCdXR0b25DbG9zZSxcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgY2FyZFByZXZpZXdJbWFnZSxcbiAgY2FyZFByZXZpZXdDYXB0aW9uLFxuICBwcm9maWxlSW5wdXROYW1lLFxuICBwcm9maWxlSW5wdXREZXNjcmlwdGlvbixcbiAgcHJvZmlsZUlucHV0UGxhY2UsXG4gIHByb2ZpbGVJbnB1dExpbmssXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbi8vIGltcG9ydCB7IGNyZWF0ZSB9IGZyb20gXCJsb2Rhc2hcIjtcbi8vIGltcG9ydCB7IHByb2ZpbGUgfSBmcm9tIFwiY29uc29sZVwiO1xuXG4vLyBGT1JNIFZBTElEQVRJT04gSU5JVFxuY29uc3QgcHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgcHJvZmlsZUVkaXRGb3JtXG4pO1xuY29uc3QgcHJvZmlsZUFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBwcm9maWxlQWRkRm9ybVxuKTtcblxucHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbnByb2ZpbGVBZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy8gVVNFUiBJTkZPIElOSVRcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBwcm9maWxlTmFtZSxcbiAgam9iU2VsZWN0b3I6IHByb2ZpbGVEZXNjcmlwdGlvbixcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVFZGl0Rm9ybVN1Ym1pdCgpIHtcbiAgY29uc29sZS5sb2coXCJFZGl0IGZvcm0gc3VibWl0IGhhbmRsZXIgY2FsbGVkXCIpOyAvLyBBZGQgdGhpcyBsaW5lXG4gIGNvbnNvbGUubG9nKFwiTmFtZTpcIiwgcHJvZmlsZUlucHV0TmFtZS52YWx1ZSk7XG4gIGNvbnNvbGUubG9nKFwiRGVzY3JpcHRpb246XCIsIHByb2ZpbGVJbnB1dERlc2NyaXB0aW9uLnZhbHVlKTtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgIG5hbWU6IHByb2ZpbGVJbnB1dE5hbWUudmFsdWUsXG4gICAgam9iOiBwcm9maWxlSW5wdXREZXNjcmlwdGlvbi52YWx1ZSxcbiAgfSk7XG4gIHByb2ZpbGVFZGl0Rm9ybS5yZXNldCgpO1xuICBwcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XG4gIHByb2ZpbGVFZGl0UG9wdXAuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkRm9ybVN1Ym1pdCgpIHtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICBwbGFjZTogcHJvZmlsZUlucHV0UGxhY2UudmFsdWUsXG4gICAgbGluazogcHJvZmlsZUlucHV0TGluay52YWx1ZSxcbiAgICBhbHQ6IGBJbWFnZSBvZiAke3Byb2ZpbGVJbnB1dFBsYWNlLnZhbHVlfWAsXG4gIH07XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChkYXRhKTtcbiAgQ2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gIHByb2ZpbGVBZGRGb3JtLnJlc2V0KCk7XG4gIHByb2ZpbGVBZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwcm9maWxlQWRkRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XG4gIHByb2ZpbGVBZGRQb3B1cC5jbG9zZSgpO1xufVxuXG4vLyBQT1BVUCBJTklUXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVFZGl0Rm9ybVN1Ym1pdFxuKTtcblxuY29uc3QgcHJvZmlsZUFkZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIsXG4gIGhhbmRsZUFkZEZvcm1TdWJtaXRcbik7XG5cbmNvbnN0IHByb2ZpbGVQcmV2aWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJvZmlsZS1wcmV2aWV3LW1vZGFsXCIpO1xuXG5wcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wcm9maWxlQWRkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnByb2ZpbGVQcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gU0VDVElPTiBJTklUXG5jb25zdCBDYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcbiAgICAgIENhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5cbi8vIENSRUFURSBDQVJEXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljayk7XG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcbn1cblxuLy8gSU1BR0UgQ0xJQ0sgSEFORExFUlxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhsaW5rLCBhbHQsIHBsYWNlKSB7XG4gIHByb2ZpbGVQcmV2aWV3UG9wdXAub3BlbihsaW5rLCBhbHQsIHBsYWNlKTtcbn1cblxuLy8gRVZFTlQgTElTVEVORVJTXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGNvbnNvbGUubG9nKFwiRWRpdCBCdXR0b24gQ2xpY2tlZCAtIFVzZXIgRGF0YTpcIiwgdXNlckRhdGEpO1xuXG4gIHByb2ZpbGVJbnB1dE5hbWUudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xuICBwcm9maWxlSW5wdXREZXNjcmlwdGlvbi52YWx1ZSA9IHVzZXJEYXRhLmpvYjtcblxuICBwcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHByb2ZpbGVFZGl0UG9wdXAub3BlbigpO1xufSk7XG5cbnByb2ZpbGVFZGl0QnV0dG9uQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gIHByb2ZpbGVFZGl0UG9wdXAuY2xvc2UoKVxuKTtcblxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwcm9maWxlQWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgcHJvZmlsZUFkZEZvcm0ucmVzZXQoKTtcbiAgcHJvZmlsZUFkZEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xuICBwcm9maWxlQWRkUG9wdXAub3BlbigpO1xufSk7XG5cbnByb2ZpbGVBZGRCdXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gcHJvZmlsZUFkZFBvcHVwLmNsb3NlKCkpO1xuXG5wcm9maWxlUHJldmlld0J1dHRvbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICBwcm9maWxlUHJldmlld1BvcHVwLmNsb3NlKClcbik7XG5cbnByb2ZpbGVQcmV2aWV3TW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICBpZiAoZXZlbnQudGFyZ2V0ID09PSBwcm9maWxlUHJldmlld01vZGFsKSB7XG4gICAgcHJvZmlsZVByZXZpZXdQb3B1cC5jbG9zZSgpO1xuICB9XG59KTtcblxuLy8gLy8gSW5pdGlhbCByZW5kZXJcbkNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuXG4gICAgLy8gLy8gRGVidWdnaW5nXG4gICAgLy8gY29uc29sZS5sb2coXCJVc2VySW5mbyBDb25zdHJ1Y3RvcjpcIik7XG4gICAgLy8gY29uc29sZS5sb2coXCJOYW1lIEVsZW1lbnQ6XCIsIHRoaXMuX25hbWVFbGVtZW50KTtcbiAgICAvLyBjb25zb2xlLmxvZyhcIkpvYiBFbGVtZW50OlwiLCB0aGlzLl9qb2JFbGVtZW50KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xuICAgIC8vIGNvbnNvbGUubG9nKFwiU2V0dGluZyB1c2VyIGluZm86XCIsIG5hbWUsIGpvYik7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XG5cbiAgICAvLyAvLyBEZWJ1Z2dpbmdcbiAgICAvLyBjb25zb2xlLmxvZyhcIlVwZGF0ZWQgTmFtZSBFbGVtZW50OlwiLCB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCk7XG4gICAgLy8gY29uc29sZS5sb2coXCJVcGRhdGVkIEpvYiBFbGVtZW50OlwiLCB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5fcGxhY2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19oZWFkaW5nX3R5cGVfcHJldmlld1wiXG4gICAgKTtcbiAgfVxuXG4gIG9wZW4obGluaywgYWx0LCBwbGFjZSkge1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gYWx0O1xuICAgIHRoaXMuX3BsYWNlLnRleHRDb250ZW50ID0gcGxhY2U7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfcGxhY2UiLCJwbGFjZSIsIl9saW5rIiwibGluayIsIl9hbHQiLCJhbHQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsImdldFZpZXciLCJjYXJkVGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsImNhcmRJbWFnZSIsImNhcmRDYXB0aW9uIiwic3JjIiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9zZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckNsYXNzIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfaGFuZGxlTW91c2VEb3duIiwiX2hhbmRsZU1vdXNlVXAiLCJfaXNNb3VzZURvd25Pbk1vZGFsIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJzZXRFdmVudExpc3RlbmVycyIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlQWRkTW9kYWwiLCJwcm9maWxlUHJldmlld01vZGFsIiwicHJvZmlsZUVkaXRGb3JtIiwicHJvZmlsZUFkZEZvcm0iLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0QnV0dG9uQ2xvc2UiLCJwcm9maWxlQWRkQnV0dG9uQ2xvc2UiLCJwcm9maWxlQWRkQnV0dG9uIiwicHJvZmlsZVByZXZpZXdCdXR0b25DbG9zZSIsInByb2ZpbGVJbnB1dE5hbWUiLCJwcm9maWxlSW5wdXREZXNjcmlwdGlvbiIsInByb2ZpbGVJbnB1dFBsYWNlIiwicHJvZmlsZUlucHV0TGluayIsInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRzIiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0VmFsdWVzIiwiaW5wdXQiLCJjb25zb2xlIiwibG9nIiwibmFtZSIsInZhbHVlIiwiX3N1Ym1pdEhhbmRsZXIiLCJyZXNldCIsInByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvciIsInByb2ZpbGVBZGRGb3JtVmFsaWRhdG9yIiwidXNlckluZm8iLCJfcmVmIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImdldFVzZXJJbmZvIiwiam9iIiwic2V0VXNlckluZm8iLCJfcmVmMiIsInByb2ZpbGVFZGl0UG9wdXAiLCJwcm9maWxlQWRkUG9wdXAiLCJjYXJkRWxlbWVudCIsImNyZWF0ZUNhcmQiLCJDYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJwcm9maWxlUHJldmlld1BvcHVwIiwiX2ltYWdlIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJhcHBlbmQiLCJ1c2VyRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=