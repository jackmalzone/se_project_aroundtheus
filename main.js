!function(){"use strict";class e{constructor(e,t,s){this._place=e.place,this._link=e.link,this._alt=e.alt,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeButton()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteButton()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick(this._link,this._alt,this._place)}))}_handleLikeButton(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}getView(){const e=document.querySelector(this._cardSelector);this._cardElement=e.content.firstElementChild.cloneNode(!0);const t=this._cardElement.querySelector(".card__image"),s=this._cardElement.querySelector(".card__caption");return t.src=this._link,t.alt=this._alt,s.textContent=this._place,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._settings=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._settings.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._settings.errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.textContent="",t.classList.remove(this._settings.errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():(this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this._toggleButtonState()}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}disableButton(){this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0}}class s{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._handleMouseDown=this._handleMouseDown.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this._isMouseDownOnModal=!1}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleMouseDown(e){e.target.classList.contains("modal_opened")?this._isMouseDownOnModal=!0:this._isMouseDownOnModal=!1}_handleMouseUp(e){this._isMouseDownOnModal&&e.target.classList.contains("modal_opened")&&this.close(e.target),this._isMouseDownOnModal=!1}setEventListeners(){this._popupElement.addEventListener("mousedown",this._handleMouseDown),this._popupElement.addEventListener("mouseup",this._handleMouseUp),this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>this.close()))}}class n extends s{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputs=Array.from(this._popupForm.querySelectorAll(".modal__input"))}_getInputValues(){return this._inputValues={},this._inputs.forEach((e=>{this._inputValues[e.name]=e.value})),this._inputValues}setEventListeners(){super.setEventListeners(),this._submitHandler=e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()},this._popupForm.addEventListener("submit",this._submitHandler)}close(){super.close()}}document.querySelector("#card-template").content;const o=document.querySelector("#profile-edit-modal"),i=document.querySelector("#profile-add-modal"),r=document.querySelector("#profile-preview-modal"),a=o.querySelector(".modal__form"),l=i.querySelector(".modal__form"),c=(document.querySelector(".cards__list"),document.querySelector("#profile-edit-button")),u=(o.querySelector("#modal-button-close"),i.querySelector("#modal-button-close"),document.querySelector("#profile-add-button"));r.querySelector("#modal-button-close"),r.querySelector(".modal__image"),r.querySelector(".modal__heading");const d=document.querySelector("#modal-input-name"),m=document.querySelector("#modal-input-description"),_=(l.querySelector("#modal-input-place"),l.querySelector("#modal-input-link"),{formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__submit-button_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_active"}),h=new t(_,a),p=new t(_,l);h.enableValidation(),p.enableValidation();const g=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:s}=e;this._nameElement.textContent=t,this._jobElement.textContent=s}}({nameSelector:"#profile-name",jobSelector:"#profile-description"}),E=new n("#profile-edit-modal",(function(e){g.setUserInfo({name:e.title,job:e.description}),a.reset(),h.disableButton(),E.close()})),f=new n("#profile-add-modal",(function(e){const t=S({place:e.place,link:e.link,alt:`Image of ${e.place}`});y.addItem(t),p.disableButton(),f.close(),l.reset()})),w=new class extends s{constructor(e){super(e),this._image=this._popupElement.querySelector(".modal__image"),this._place=this._popupElement.querySelector(".modal__heading_type_preview")}open(e,t,s){this._image.src=e,this._image.alt=t,this._place.textContent=s,super.open()}}("#profile-preview-modal");E.setEventListeners(),f.setEventListeners(),w.setEventListeners();const y=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{place:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg",alt:"Sunset view of Yosemite Valley with El Capitan visible, river flowing in the foreground surrounded by dense pine trees."},{place:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg",alt:"Calm waters of Lake Louise reflecting the surrounding mountains under a soft blue sky."},{place:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg",alt:"Sunburst peaking over the silhouette of the Bald Mountains at sunrise, casting a warm glow across the hazy, layered ridges."},{place:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg",alt:"Starry night sky over the jagged peaks of Latemar mountain range with remnants of snow highlighting its rugged terrain."},{place:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg",alt:"Twilight hues casting a soft glow on the peaks of Vanoise National Park, reflected in the still waters of a mountain lake."},{place:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg",alt:"Wooden boats moored at a dock on Lago di Braies with towering Dolomite mountains reflecting in the crystal-clear lake water."}],renderer:e=>{const t=S(e);y.addItem(t,!0)}},".cards__list");function S(t){return new e(t,"#card-template",v).getView()}function v(e,t,s){w.open(e,t,s)}c.addEventListener("click",(()=>{const e=g.getUserInfo();d.value=e.name,m.value=e.job,h.resetValidation(),E.open()})),u.addEventListener("click",(()=>{p.resetValidation(),f.open()})),y.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQ0VuSSxLQUFLZ0ksT0FBT3RFLFNBQVMwRSxJQUNuQnBJLEtBQUtpSSxVQUFVRyxFQUFLLEdBRXhCLENBRUFWLE9BQUFBLENBQVFXLEdBQ05ySSxLQUFLa0ksV0FBV0ksUUFBUUQsRUFDMUIsR0h1RUEsQ0FDRVAsTURyRndCLENBQzFCLENBQ0U1SCxNQUFPLGtCQUNQRSxLQUFNLHFHQUNORSxJQUFLLDJIQUVQLENBQ0VKLE1BQU8sY0FDUEUsS0FBTSx3R0FDTkUsSUFBSywwRkFFUCxDQUNFSixNQUFPLGlCQUNQRSxLQUFNLDJHQUNORSxJQUFLLCtIQUVQLENBQ0VKLE1BQU8sVUFDUEUsS0FBTSxvR0FDTkUsSUFBSywySEFFUCxDQUNFSixNQUFPLHdCQUNQRSxLQUFNLG9HQUNORSxJQUFLLDhIQUVQLENBQ0VKLE1BQU8saUJBQ1BFLEtBQU0saUdBQ05FLElBQUssaUlDeURMeUgsU0FBV0ssSUFDVCxNQUFNYixFQUFjQyxFQUFXWSxHQUMvQlgsRUFBWUMsUUFBUUgsR0FBYSxFQUFLLEdBRzFDLGdCQUlGLFNBQVNDLEVBQVczSCxHQUVsQixPQURhLElBQUlGLEVBQUtFLEVBQU0saUJBQWtCRSxHQUNsQ21CLFNBQ2QsQ0FHQSxTQUFTbkIsRUFBaUJLLEVBQU1FLEVBQUtKLEdBQ25DeUgsRUFBb0JwRCxLQUFLbkUsRUFBTUUsRUFBS0osRUFDdEMsQ0FHQThGLEVBQWtCcEYsaUJBQWlCLFNBQVMsS0FDMUMsTUFBTTJILEVBQVcvQixFQUFTTSxjQUUxQlosRUFBaUJULE1BQVE4QyxFQUFTL0MsS0FDbENXLEVBQXdCVixNQUFROEMsRUFBU3hCLElBRXpDVCxFQUF5QnhDLGtCQUN6Qm9ELEVBQWlCM0MsTUFBTSxJQUd6QjBCLEVBQWlCckYsaUJBQWlCLFNBQVMsS0FDekMyRixFQUF3QnpDLGtCQUN4QndELEVBQWdCL0MsTUFBTSxJQUl4QmtELEVBQVlVLGEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgICB0aGlzLl9wbGFjZSA9IGRhdGEucGxhY2U7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9hbHQgPSBkYXRhLmFsdDtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbigpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX2xpbmssIHRoaXMuX2FsdCwgdGhpcy5fcGxhY2UpO1xuICAgICAgfSk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIC8vIGdldCBjYXJkIHZpZXdcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIGNvbnN0IGNhcmRDYXB0aW9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19jYXB0aW9uXCIpO1xuXG4gICAgY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgY2FyZEltYWdlLmFsdCA9IHRoaXMuX2FsdDtcbiAgICBjYXJkQ2FwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX3BsYWNlO1xuXG4gICAgLy8gc2V0IGV2ZW50IGxpc3RlbmVyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIC8vIHJldHVybiBjYXJkXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgLy8gUFJJVkFURSBNRVRIT0RTXG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG5cbiAgLy8gUFVCTElDIE1FVEhPRFNcblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG5cbiAgZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVNb3VzZURvd24gPSB0aGlzLl9oYW5kbGVNb3VzZURvd24uYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVNb3VzZVVwID0gdGhpcy5faGFuZGxlTW91c2VVcC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2lzTW91c2VEb3duT25Nb2RhbCA9IGZhbHNlO1xuICB9XG5cbiAgLy8gT3RoZXIgbWV0aG9kcy4uLlxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVNb3VzZURvd24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xuICAgICAgdGhpcy5faXNNb3VzZURvd25Pbk1vZGFsID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faXNNb3VzZURvd25Pbk1vZGFsID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZU1vdXNlVXAoZXZlbnQpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLl9pc01vdXNlRG93bk9uTW9kYWwgJiZcbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIilcbiAgICApIHtcbiAgICAgIHRoaXMuY2xvc2UoZXZlbnQudGFyZ2V0KTtcbiAgICB9XG4gICAgdGhpcy5faXNNb3VzZURvd25Pbk1vZGFsID0gZmFsc2U7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVNb3VzZURvd24pO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLl9oYW5kbGVNb3VzZVVwKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0cyA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIilcbiAgICApO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9O1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX3N1Ym1pdEhhbmRsZXIpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuIiwiaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgcGxhY2U6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICAgIGFsdDogXCJTdW5zZXQgdmlldyBvZiBZb3NlbWl0ZSBWYWxsZXkgd2l0aCBFbCBDYXBpdGFuIHZpc2libGUsIHJpdmVyIGZsb3dpbmcgaW4gdGhlIGZvcmVncm91bmQgc3Vycm91bmRlZCBieSBkZW5zZSBwaW5lIHRyZWVzLlwiLFxuICB9LFxuICB7XG4gICAgcGxhY2U6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gICAgYWx0OiBcIkNhbG0gd2F0ZXJzIG9mIExha2UgTG91aXNlIHJlZmxlY3RpbmcgdGhlIHN1cnJvdW5kaW5nIG1vdW50YWlucyB1bmRlciBhIHNvZnQgYmx1ZSBza3kuXCIsXG4gIH0sXG4gIHtcbiAgICBwbGFjZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgICBhbHQ6IFwiU3VuYnVyc3QgcGVha2luZyBvdmVyIHRoZSBzaWxob3VldHRlIG9mIHRoZSBCYWxkIE1vdW50YWlucyBhdCBzdW5yaXNlLCBjYXN0aW5nIGEgd2FybSBnbG93IGFjcm9zcyB0aGUgaGF6eSwgbGF5ZXJlZCByaWRnZXMuXCIsXG4gIH0sXG4gIHtcbiAgICBwbGFjZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gICAgYWx0OiBcIlN0YXJyeSBuaWdodCBza3kgb3ZlciB0aGUgamFnZ2VkIHBlYWtzIG9mIExhdGVtYXIgbW91bnRhaW4gcmFuZ2Ugd2l0aCByZW1uYW50cyBvZiBzbm93IGhpZ2hsaWdodGluZyBpdHMgcnVnZ2VkIHRlcnJhaW4uXCIsXG4gIH0sXG4gIHtcbiAgICBwbGFjZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgICBhbHQ6IFwiVHdpbGlnaHQgaHVlcyBjYXN0aW5nIGEgc29mdCBnbG93IG9uIHRoZSBwZWFrcyBvZiBWYW5vaXNlIE5hdGlvbmFsIFBhcmssIHJlZmxlY3RlZCBpbiB0aGUgc3RpbGwgd2F0ZXJzIG9mIGEgbW91bnRhaW4gbGFrZS5cIixcbiAgfSxcbiAge1xuICAgIHBsYWNlOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gICAgYWx0OiBcIldvb2RlbiBib2F0cyBtb29yZWQgYXQgYSBkb2NrIG9uIExhZ28gZGkgQnJhaWVzIHdpdGggdG93ZXJpbmcgRG9sb21pdGUgbW91bnRhaW5zIHJlZmxlY3RpbmcgaW4gdGhlIGNyeXN0YWwtY2xlYXIgbGFrZSB3YXRlci5cIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudDtcblxuLy8gRWxlbWVudHNcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlUHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1wcmV2aWV3LW1vZGFsXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRGb3JtID0gcHJvZmlsZUFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5leHBvcnQgY29uc3QgY2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG4vLyBCdXR0b25zXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b25DbG9zZSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjbW9kYWwtYnV0dG9uLWNsb3NlXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZEJ1dHRvbkNsb3NlID0gcHJvZmlsZUFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI21vZGFsLWJ1dHRvbi1jbG9zZVwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlUHJldmlld0J1dHRvbkNsb3NlID0gcHJvZmlsZVByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNtb2RhbC1idXR0b24tY2xvc2VcIlxuKTtcbmV4cG9ydCBsZXQgaXNNb3VzZURvd25Pbk1vZGFsID0gZmFsc2U7XG5cbi8vIFByb2ZpbGUgRGF0YVxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gXCIjcHJvZmlsZS1uYW1lXCI7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiO1xuZXhwb3J0IGNvbnN0IGNhcmRQcmV2aWV3SW1hZ2UgPVxuICBwcm9maWxlUHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRQcmV2aWV3Q2FwdGlvbiA9XG4gIHByb2ZpbGVQcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faGVhZGluZ1wiKTtcblxuLy8gRm9ybSBEYXRhXG5leHBvcnQgY29uc3QgcHJvZmlsZUlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtaW5wdXQtbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5wdXREZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI21vZGFsLWlucHV0LWRlc2NyaXB0aW9uXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUlucHV0UGxhY2UgPVxuICBwcm9maWxlQWRkRm9ybS5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWlucHV0LXBsYWNlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbnB1dExpbmsgPVxuICBwcm9maWxlQWRkRm9ybS5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWlucHV0LWxpbmtcIik7XG5cbi8vIFZhbGlkYXRpb24gc2V0dGluZ3NcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idXR0b25faW5hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxufTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHtcbiAgaW5pdGlhbENhcmRzLFxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG4gIHByb2ZpbGVFZGl0Rm9ybSxcbiAgcHJvZmlsZUFkZEZvcm0sXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBwcm9maWxlQWRkQnV0dG9uLFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxuICBwcm9maWxlSW5wdXROYW1lLFxuICBwcm9maWxlSW5wdXREZXNjcmlwdGlvbixcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuLy8gaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSBcImxvZGFzaFwiO1xuLy8gaW1wb3J0IHsgcHJvZmlsZSB9IGZyb20gXCJjb25zb2xlXCI7XG5cbi8vIEZPUk0gVkFMSURBVElPTiBJTklUXG5jb25zdCBwcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBwcm9maWxlRWRpdEZvcm1cbik7XG5jb25zdCBwcm9maWxlQWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG4gIHByb2ZpbGVBZGRGb3JtXG4pO1xuXG5wcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xucHJvZmlsZUFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyBVU0VSIElORk8gSU5JVFxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IHByb2ZpbGVOYW1lLFxuICBqb2JTZWxlY3RvcjogcHJvZmlsZURlc2NyaXB0aW9uLFxufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRGb3JtU3VibWl0KGRhdGEpIHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgIG5hbWU6IGRhdGEudGl0bGUsXG4gICAgam9iOiBkYXRhLmRlc2NyaXB0aW9uLFxuICB9KTtcblxuICBwcm9maWxlRWRpdEZvcm0ucmVzZXQoKTtcbiAgcHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcbiAgcHJvZmlsZUVkaXRQb3B1cC5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRGb3JtU3VibWl0KGRhdGEpIHtcbiAgY29uc3QgY2FyZERhdGEgPSB7XG4gICAgcGxhY2U6IGRhdGEucGxhY2UsXG4gICAgbGluazogZGF0YS5saW5rLFxuICAgIGFsdDogYEltYWdlIG9mICR7ZGF0YS5wbGFjZX1gLFxuICB9O1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuXG4gIHByb2ZpbGVBZGRGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcbiAgcHJvZmlsZUFkZFBvcHVwLmNsb3NlKCk7XG4gIHByb2ZpbGVBZGRGb3JtLnJlc2V0KCk7XG59XG5cbi8vIFBPUFVQIElOSVRcbmNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIGhhbmRsZUVkaXRGb3JtU3VibWl0XG4pO1xuXG5jb25zdCBwcm9maWxlQWRkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1hZGQtbW9kYWxcIixcbiAgaGFuZGxlQWRkRm9ybVN1Ym1pdFxuKTtcblxuY29uc3QgcHJvZmlsZVByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwcm9maWxlLXByZXZpZXctbW9kYWxcIik7XG5cbnByb2ZpbGVFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnByb2ZpbGVBZGRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xucHJvZmlsZVByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBTRUNUSU9OIElOSVRcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCwgdHJ1ZSk7XG4gICAgfSxcbiAgfSxcbiAgXCIuY2FyZHNfX2xpc3RcIlxuKTtcblxuLy8gQ1JFQVRFIENBUkRcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufVxuXG4vLyBJTUFHRSBDTElDSyBIQU5ETEVSXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGxpbmssIGFsdCwgcGxhY2UpIHtcbiAgcHJvZmlsZVByZXZpZXdQb3B1cC5vcGVuKGxpbmssIGFsdCwgcGxhY2UpO1xufVxuXG4vLyBFVkVOVCBMSVNURU5FUlNcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcblxuICBwcm9maWxlSW5wdXROYW1lLnZhbHVlID0gdXNlckRhdGEubmFtZTtcbiAgcHJvZmlsZUlucHV0RGVzY3JpcHRpb24udmFsdWUgPSB1c2VyRGF0YS5qb2I7XG5cbiAgcHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHByb2ZpbGVBZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwcm9maWxlQWRkUG9wdXAub3BlbigpO1xufSk7XG5cbi8vIC8vIEluaXRpYWwgcmVuZGVyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG4vLyBXaWxsIGFkZCBuZWVkcyBjb3JyZWN0ZWQgaW4gZnV0dXJlXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3BsYWNlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9faGVhZGluZ190eXBlX3ByZXZpZXdcIlxuICAgICk7XG4gIH1cblxuICBvcGVuKGxpbmssIGFsdCwgcGxhY2UpIHtcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGFsdDtcbiAgICB0aGlzLl9wbGFjZS50ZXh0Q29udGVudCA9IHBsYWNlO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9wbGFjZSIsInBsYWNlIiwiX2xpbmsiLCJsaW5rIiwiX2FsdCIsImFsdCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiZ2V0VmlldyIsImNhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwiY2FyZEltYWdlIiwiY2FyZENhcHRpb24iLCJzcmMiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX3NldHRpbmdzIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvbiIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yQ2xhc3MiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZGlzYWJsZUJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsImZvckVhY2giLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9oYW5kbGVNb3VzZURvd24iLCJfaGFuZGxlTW91c2VVcCIsIl9pc01vdXNlRG93bk9uTW9kYWwiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXkiLCJ0YXJnZXQiLCJjb250YWlucyIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dHMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRWYWx1ZXMiLCJpbnB1dCIsIm5hbWUiLCJ2YWx1ZSIsIl9zdWJtaXRIYW5kbGVyIiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVBZGRNb2RhbCIsInByb2ZpbGVQcmV2aWV3TW9kYWwiLCJwcm9maWxlRWRpdEZvcm0iLCJwcm9maWxlQWRkRm9ybSIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUFkZEJ1dHRvbiIsInByb2ZpbGVJbnB1dE5hbWUiLCJwcm9maWxlSW5wdXREZXNjcmlwdGlvbiIsInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvciIsInByb2ZpbGVBZGRGb3JtVmFsaWRhdG9yIiwidXNlckluZm8iLCJfcmVmIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImdldFVzZXJJbmZvIiwiam9iIiwic2V0VXNlckluZm8iLCJfcmVmMiIsInByb2ZpbGVFZGl0UG9wdXAiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicmVzZXQiLCJwcm9maWxlQWRkUG9wdXAiLCJjYXJkRWxlbWVudCIsImNyZWF0ZUNhcmQiLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJwcm9maWxlUHJldmlld1BvcHVwIiwiX2ltYWdlIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwidXNlckRhdGEiXSwic291cmNlUm9vdCI6IiJ9